import{c as vt,j as s,i as Jt,m as ie,n as Me,r as m,x as Kt,y as Qt,o as Zt,l as er,t as S,z as be,L as tr,B as R,M as Qe,A as Z,D as ee,E as te,F as re,G as P}from"./index-BomiKcKO.js";import{L as A,I as U}from"./label-DtlqOrLU.js";import{P as Ze,e as De,f as we,g as je,h as Ce,i as Ne}from"./dialog-XEH1oEkS.js";import{g as et,a as tt}from"./professional-templates-DXy39DpE.js";import{A as rr}from"./arrow-left-IUg7KLFc.js";import{S as sr}from"./share-2-B_XCIxTo.js";import"./index-BqL4bi_L.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ir=vt("save",nr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Se=vt("trash-2",ar);function rt({className:t,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:Jt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function or({templates:t,onSelectTemplate:e}){return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Choose Your Template"}),s.jsx("p",{className:"text-slate-600",children:"Select a design that matches your business style"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>s.jsx(ie,{className:"cursor-pointer hover:shadow-xl transition-all hover:-translate-y-1 border-2 hover:border-orange-500",onClick:()=>e(r),children:s.jsxs(Me,{className:"pt-6",children:[s.jsxs("div",{className:"h-48 rounded-lg mb-4 p-6 flex flex-col justify-between",style:{backgroundColor:r.backgroundColor},children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold mb-2",style:{color:r.primaryColor},children:"Menu"}),s.jsx("div",{className:"h-2 w-24 rounded",style:{backgroundColor:r.accentColor}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"h-3 w-32 rounded",style:{backgroundColor:r.textColor,opacity:.7}}),s.jsx("div",{className:"h-3 w-12 rounded",style:{backgroundColor:r.primaryColor,opacity:.5}})]}),s.jsx("div",{className:"h-2 w-full rounded",style:{backgroundColor:r.textColor,opacity:.3}}),s.jsxs("div",{className:"flex justify-between items-center mt-3",children:[s.jsx("div",{className:"h-3 w-28 rounded",style:{backgroundColor:r.textColor,opacity:.7}}),s.jsx("div",{className:"h-3 w-12 rounded",style:{backgroundColor:r.primaryColor,opacity:.5}})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-1",children:r.name}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:r.description}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-slate-200",style:{backgroundColor:r.primaryColor}}),s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-slate-200",style:{backgroundColor:r.accentColor}}),s.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-slate-200",style:{backgroundColor:r.backgroundColor}})]})]})]})},r.id))})]})}const yt=m.createContext({dragDropManager:void 0});function _(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var st=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),nt=function(){return Math.random().toString(36).substring(7).split("").join(".")},it={INIT:"@@redux/INIT"+nt(),REPLACE:"@@redux/REPLACE"+nt()};function lr(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function bt(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(_(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(_(1));return r(bt)(t,e)}if(typeof t!="function")throw new Error(_(2));var i=t,a=e,o=[],l=o,f=!1;function p(){l===o&&(l=o.slice())}function u(){if(f)throw new Error(_(3));return a}function b(y){if(typeof y!="function")throw new Error(_(4));if(f)throw new Error(_(5));var N=!0;return p(),l.push(y),function(){if(N){if(f)throw new Error(_(6));N=!1,p();var d=l.indexOf(y);l.splice(d,1),o=null}}}function w(y){if(!lr(y))throw new Error(_(7));if(typeof y.type>"u")throw new Error(_(8));if(f)throw new Error(_(9));try{f=!0,a=i(a,y)}finally{f=!1}for(var N=o=l,I=0;I<N.length;I++){var d=N[I];d()}return y}function x(y){if(typeof y!="function")throw new Error(_(10));i=y,w({type:it.REPLACE})}function v(){var y,N=b;return y={subscribe:function(d){if(typeof d!="object"||d===null)throw new Error(_(11));function O(){d.next&&d.next(u())}O();var L=N(O);return{unsubscribe:L}}},y[st]=function(){return this},y}return w({type:it.INIT}),n={dispatch:w,subscribe:b,getState:u,replaceReducer:x},n[st]=v,n}function D(t,e,...r){if(cr()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function cr(){return typeof process<"u"&&!0}function dr(t,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,t)}function ur(t,e){return t.filter(r=>r!==e)}function Dt(t){return typeof t=="object"}function hr(t,e){const r=new Map,n=a=>{r.set(a,r.has(a)?r.get(a)+1:1)};t.forEach(n),e.forEach(n);const i=[];return r.forEach((a,o)=>{a===1&&i.push(o)}),i}function gr(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Be="dnd-core/INIT_COORDS",ae="dnd-core/BEGIN_DRAG",He="dnd-core/PUBLISH_DRAG_SOURCE",oe="dnd-core/HOVER",le="dnd-core/DROP",ce="dnd-core/END_DRAG";function at(t,e){return{type:Be,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const fr={type:Be,payload:{clientOffset:null,sourceClientOffset:null}};function mr(t){return function(r=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=n,l=t.getMonitor(),f=t.getRegistry();t.dispatch(at(a)),pr(r,l,f);const p=yr(r,l);if(p==null){t.dispatch(fr);return}let u=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");xr(o),u=o(p)}t.dispatch(at(a,u));const w=f.getSource(p).beginDrag(l,p);if(w==null)return;vr(w),f.pinSource(p);const x=f.getSourceType(p);return{type:ae,payload:{itemType:x,item:w,sourceId:p,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function pr(t,e,r){D(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){D(r.getSource(n),"Expected sourceIds to be registered.")})}function xr(t){D(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function vr(t){D(Dt(t),"Item must be an object.")}function yr(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function br(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){br(t,i,r[i])})}return t}function wr(t){return function(r={}){const n=t.getMonitor(),i=t.getRegistry();jr(n),Sr(n).forEach((o,l)=>{const f=Cr(o,l,i,n),p={type:le,payload:{dropResult:Dr({},r,f)}};t.dispatch(p)})}}function jr(t){D(t.isDragging(),"Cannot call drop while not dragging."),D(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Cr(t,e,r,n){const i=r.getTarget(t);let a=i?i.drop(n,t):void 0;return Nr(a),typeof a>"u"&&(a=e===0?{}:n.getDropResult()),a}function Nr(t){D(typeof t>"u"||Dt(t),"Drop result must either be an object or undefined.")}function Sr(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Tr(t){return function(){const r=t.getMonitor(),n=t.getRegistry();Ir(r);const i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:ce}}}function Ir(t){D(t.isDragging(),"Cannot call endDrag while not dragging.")}function Re(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function Or(t){return function(r,{clientOffset:n}={}){Er(r);const i=r.slice(0),a=t.getMonitor(),o=t.getRegistry(),l=a.getItemType();return kr(i,o,l),Pr(i,a,o),Mr(i,a,o),{type:oe,payload:{targetIds:i,clientOffset:n||null}}}}function Er(t){D(Array.isArray(t),"Expected targetIds to be an array.")}function Pr(t,e,r){D(e.isDragging(),"Cannot call hover while not dragging."),D(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const i=t[n];D(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const a=r.getTarget(i);D(a,"Expected targetIds to be registered.")}}function kr(t,e,r){for(let n=t.length-1;n>=0;n--){const i=t[n],a=e.getTargetType(i);Re(a,r)||t.splice(n,1)}}function Mr(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function Rr(t){return function(){if(t.getMonitor().isDragging())return{type:He}}}function Fr(t){return{beginDrag:mr(t),publishDragSource:Rr(t),hover:Or(t),drop:wr(t),endDrag:Tr(t)}}class Lr{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(a){return(...o)=>{const l=a.apply(e,o);typeof l<"u"&&r(l)}}const i=Fr(this);return Object.keys(i).reduce((a,o)=>{const l=i[o];return a[o]=n(l),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function Ar(t,e){return{x:t.x+e.x,y:t.y+e.y}}function wt(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _r(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:wt(Ar(e,n),r)}function Br(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:wt(e,r)}const X=[],ze=[];X.__IS_NONE__=!0;ze.__IS_ALL__=!0;function Hr(t,e){return t===X?!1:t===ze||typeof e>"u"?!0:gr(e,t).length>0}class zr{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;D(typeof e=="function","listener must be a function."),D(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),l=o.stateId;try{l===i||l===i+1&&!Hr(o.dirtyHandlerIds,n)||e()}finally{i=l}};return this.store.subscribe(a)}subscribeToOffsetChange(e){D(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return D(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(D(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return Re(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(D(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Re(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(e);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return _r(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Br(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const ot=typeof global<"u"?global:self,jt=ot.MutationObserver||ot.WebKitMutationObserver;function Ct(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function Ur(t){let e=1;const r=new jt(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const $r=typeof jt=="function"?Ur:Ct;class qr{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=$r(this.flush),this.requestErrorThrow=Ct(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Gr{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Vr{create(e){const r=this.freeTasks,n=r.length?r.pop():new Gr(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Nt=new qr,Yr=new Vr(Nt.registerPendingError);function Wr(t){Nt.enqueueTask(Yr.create(t))}const Ue="dnd-core/ADD_SOURCE",$e="dnd-core/ADD_TARGET",qe="dnd-core/REMOVE_SOURCE",de="dnd-core/REMOVE_TARGET";function Xr(t){return{type:Ue,payload:{sourceId:t}}}function Jr(t){return{type:$e,payload:{targetId:t}}}function Kr(t){return{type:qe,payload:{sourceId:t}}}function Qr(t){return{type:de,payload:{targetId:t}}}function Zr(t){D(typeof t.canDrag=="function","Expected canDrag to be a function."),D(typeof t.beginDrag=="function","Expected beginDrag to be a function."),D(typeof t.endDrag=="function","Expected endDrag to be a function.")}function es(t){D(typeof t.canDrop=="function","Expected canDrop to be a function."),D(typeof t.hover=="function","Expected hover to be a function."),D(typeof t.drop=="function","Expected beginDrag to be a function.")}function Fe(t,e){if(e&&Array.isArray(t)){t.forEach(r=>Fe(r,!1));return}D(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var B;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(B||(B={}));let ts=0;function rs(){return ts++}function ss(t){const e=rs().toString();switch(t){case B.SOURCE:return`S${e}`;case B.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function lt(t){switch(t[0]){case"S":return B.SOURCE;case"T":return B.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function ct(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,a]}=r.next();if(a===e)return!0;n=!!i}while(!n);return!1}class ns{addSource(e,r){Fe(e),Zr(r);const n=this.addHandler(B.SOURCE,e,r);return this.store.dispatch(Xr(n)),n}addTarget(e,r){Fe(e,!0),es(r);const n=this.addHandler(B.TARGET,e,r);return this.store.dispatch(Jr(n)),n}containsHandler(e){return ct(this.dragSources,e)||ct(this.dropTargets,e)}getSource(e,r=!1){return D(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return D(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return D(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return D(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return lt(e)===B.SOURCE}isTargetId(e){return lt(e)===B.TARGET}removeSource(e){D(this.getSource(e),"Expected an existing source."),this.store.dispatch(Kr(e)),Wr(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){D(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Qr(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);D(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){D(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=ss(e);return this.types.set(i,r),e===B.SOURCE?this.dragSources.set(i,n):e===B.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const is=(t,e)=>t===e;function as(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function os(t,e,r=is){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function ls(t=X,e){switch(e.type){case oe:break;case Ue:case $e:case de:case qe:return X;case ae:case He:case ce:case le:default:return ze}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=hr(r,n);if(!(i.length>0||!os(r,n)))return X;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&i.push(o),l&&i.push(l)),i}function cs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ds(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){cs(t,i,r[i])})}return t}const dt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function us(t=dt,e){const{payload:r}=e;switch(e.type){case Be:case ae:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case oe:return as(t.clientOffset,r.clientOffset)?t:ds({},t,{clientOffset:r.clientOffset});case ce:case le:return dt;default:return t}}function hs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){hs(t,i,r[i])})}return t}const gs={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function fs(t=gs,e){const{payload:r}=e;switch(e.type){case ae:return V({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case He:return V({},t,{isSourcePublic:!0});case oe:return V({},t,{targetIds:r.targetIds});case de:return t.targetIds.indexOf(r.targetId)===-1?t:V({},t,{targetIds:ur(t.targetIds,r.targetId)});case le:return V({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case ce:return V({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function ms(t=0,e){switch(e.type){case Ue:case $e:return t+1;case qe:case de:return t-1;default:return t}}function ps(t=0){return t+1}function xs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){xs(t,i,r[i])})}return t}function ys(t={},e){return{dirtyHandlerIds:ls(t.dirtyHandlerIds,{type:e.type,payload:vs({},e.payload,{prevTargetIds:dr(t,"dragOperation.targetIds",[])})}),dragOffset:us(t.dragOffset,e),refCount:ms(t.refCount,e),dragOperation:fs(t.dragOperation,e),stateId:ps(t.stateId)}}function bs(t,e=void 0,r={},n=!1){const i=Ds(n),a=new zr(i,new ns(i)),o=new Lr(i,a),l=t(o,e,r);return o.receiveBackend(l),o}function Ds(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return bt(ys,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function ws(t,e){if(t==null)return{};var r=js(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function js(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}let ut=0;const ne=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Cs=m.memo(function(e){var{children:r}=e,n=ws(e,["children"]);const[i,a]=Ns(n);return m.useEffect(()=>{if(a){const o=St();return++ut,()=>{--ut===0&&(o[ne]=null)}}},[]),s.jsx(yt.Provider,{value:i,children:r})});function Ns(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Ss(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Ss(t,e=St(),r,n){const i=e;return i[ne]||(i[ne]={dragDropManager:bs(t,e,r,n)}),i[ne]}function St(){return typeof global<"u"?global:window}var Te,ht;function Ts(){return ht||(ht=1,Te=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var o=a[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),Te}var Is=Ts();const Os=Kt(Is),G=typeof window<"u"?m.useLayoutEffect:m.useEffect;function Es(t,e,r){const[n,i]=m.useState(()=>e(t)),a=m.useCallback(()=>{const o=e(t);Os(n,o)||(i(o),r&&r())},[n,t,r]);return G(a),[n,a]}function Ps(t,e,r){const[n,i]=Es(t,e,r);return G(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),n}function Tt(t,e,r){return Ps(e,t||(()=>({})),()=>r.reconnect())}function It(t,e){const r=[];return typeof t!="function"&&r.push(t),m.useMemo(()=>typeof t=="function"?t():t,r)}function ks(t){return m.useMemo(()=>t.hooks.dragSource(),[t])}function Ms(t){return m.useMemo(()=>t.hooks.dragPreview(),[t])}let Ie=!1,Oe=!1;class Rs{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){D(!Ie,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ie=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ie=!1}}isDragging(){if(!this.sourceId)return!1;D(!Oe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Oe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Oe=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Ee=!1;class Fs{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;D(!Ee,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ee=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ee=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Ls(t,e,r){const n=r.getRegistry(),i=n.addTarget(t,e);return[i,()=>n.removeTarget(i)]}function As(t,e,r){const n=r.getRegistry(),i=n.addSource(t,e);return[i,()=>n.removeSource(i)]}function Le(t,e,r,n){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const a=Object.keys(t),o=Object.keys(e);if(a.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let f=0;f<a.length;f++){const p=a[f];if(!l(p))return!1;const u=t[p],b=e[p];if(i=void 0,i===!1||i===void 0&&u!==b)return!1}return!0}function Ae(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _s(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Bs(t){return(e=null,r=null)=>{if(!m.isValidElement(e)){const a=e;return t(a,r),a}const n=e;return _s(n),Hs(n,r?a=>t(a,r):t)}}function Ot(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=Bs(n);e[r]=()=>i}}),e}function gt(t,e){typeof t=="function"?t(e):t.current=e}function Hs(t,e){const r=t.ref;return D(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?m.cloneElement(t,{ref:n=>{gt(r,n),gt(e,n)}}):m.cloneElement(t,{ref:e})}class zs{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Le(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Le(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Ot({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Ae(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Ae(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Us{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Le(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Ot({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Ae(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Y(){const{dragDropManager:t}=m.useContext(yt);return D(t!=null,"Expected drag drop context"),t}function $s(t,e){const r=Y(),n=m.useMemo(()=>new zs(r.getBackend()),[r]);return G(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),G(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function qs(){const t=Y();return m.useMemo(()=>new Rs(t),[t])}class Gs{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function Vs(t,e,r){const n=m.useMemo(()=>new Gs(t,e,r),[e,r]);return m.useEffect(()=>{n.spec=t},[t]),n}function Ys(t){return m.useMemo(()=>{const e=t.type;return D(e!=null,"spec.type must be defined"),e},[t])}function Ws(t,e,r){const n=Y(),i=Vs(t,e,r),a=Ys(t);G(function(){if(a!=null){const[l,f]=As(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),f}},[n,e,r,i,a])}function Xs(t,e){const r=It(t);D(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=qs(),i=$s(r.options,r.previewOptions);return Ws(r,n,i),[Tt(r.collect,n,i),ks(i),Ms(i)]}function Js(t){return m.useMemo(()=>t.hooks.dropTarget(),[t])}function Ks(t){const e=Y(),r=m.useMemo(()=>new Us(e.getBackend()),[e]);return G(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Qs(){const t=Y();return m.useMemo(()=>new Fs(t),[t])}function Zs(t){const{accept:e}=t;return m.useMemo(()=>(D(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class en{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function tn(t,e){const r=m.useMemo(()=>new en(t,e),[e]);return m.useEffect(()=>{r.spec=t},[t]),r}function rn(t,e,r){const n=Y(),i=tn(t,e),a=Zs(t);G(function(){const[l,f]=Ls(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),f},[n,e,i,r,a.map(o=>o.toString()).join("|")])}function sn(t,e){const r=It(t),n=Qs(),i=Ks(r.options);return rn(r,n,i),[Tt(r.collect,n,i),Js(i)]}function Et(t){let e=null;return()=>(e==null&&(e=t()),e)}function nn(t,e){return t.filter(r=>r!==e)}function an(t,e){const r=new Set,n=a=>r.add(a);t.forEach(n),e.forEach(n);const i=[];return r.forEach(a=>i.push(a)),i}class on{enter(e){const r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=an(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=nn(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class ln{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Pt="__NATIVE_FILE__",kt="__NATIVE_URL__",Mt="__NATIVE_TEXT__",Rt="__NATIVE_HTML__",ft=Object.freeze(Object.defineProperty({__proto__:null,FILE:Pt,HTML:Rt,TEXT:Mt,URL:kt},Symbol.toStringTag,{value:"Module"}));function Pe(t,e,r){const n=e.reduce((i,a)=>i||t.getData(a),"");return n??r}const _e={[Pt]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Rt]:{exposeProperties:{html:(t,e)=>Pe(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[kt]:{exposeProperties:{urls:(t,e)=>Pe(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Mt]:{exposeProperties:{text:(t,e)=>Pe(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function cn(t,e){const r=_e[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new ln(r);return n.loadDataTransfer(e),n}function ke(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(_e).filter(r=>{const n=_e[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const dn=Et(()=>/firefox/i.test(navigator.userAgent)),Ft=Et(()=>!!window.safari);class mt{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:a,c3s:o}=this;let l=r.length-1;if(e===r[l])return n[l];let f=0,p=o.length-1,u;for(;f<=p;){u=Math.floor(.5*(f+p));const x=r[u];if(x<e)f=u+1;else if(x>e)p=u-1;else return n[u]}l=Math.max(0,p);const b=e-r[l],w=b*b;return n[l]+i[l]*b+a[l]*w+o[l]*b*w}constructor(e,r){const{length:n}=e,i=[];for(let x=0;x<n;x++)i.push(x);i.sort((x,v)=>e[x]<e[v]?-1:1);const a=[],o=[];let l,f;for(let x=0;x<n-1;x++)l=e[x+1]-e[x],f=r[x+1]-r[x],a.push(l),o.push(f/l);const p=[o[0]];for(let x=0;x<a.length-1;x++){const v=o[x],y=o[x+1];if(v*y<=0)p.push(0);else{l=a[x];const N=a[x+1],I=l+N;p.push(3*I/((I+N)/v+(I+l)/y))}}p.push(o[o.length-1]);const u=[],b=[];let w;for(let x=0;x<p.length-1;x++){w=o[x];const v=p[x],y=1/a[x],N=v+p[x+1]-w-w;u.push((w-v-N)*y),b.push(N*y*y)}this.xs=e,this.ys=r,this.c1s=p,this.c2s=u,this.c3s=b}}const un=1;function Lt(t){const e=t.nodeType===un?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function se(t){return{x:t.clientX,y:t.clientY}}function hn(t){var e;return t.nodeName==="IMG"&&(dn()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function gn(t,e,r,n){let i=t?e.width:r,a=t?e.height:n;return Ft()&&t&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function fn(t,e,r,n,i){const a=hn(e),l=Lt(a?t:e),f={x:r.x-l.x,y:r.y-l.y},{offsetWidth:p,offsetHeight:u}=t,{anchorX:b,anchorY:w}=n,{dragPreviewWidth:x,dragPreviewHeight:v}=gn(a,e,p,u),y=()=>{let F=new mt([0,.5,1],[f.y,f.y/u*v,f.y+v-u]).interpolate(w);return Ft()&&a&&(F+=(window.devicePixelRatio-1)*v),F},N=()=>new mt([0,.5,1],[f.x,f.x/p*x,f.x+x-p]).interpolate(b),{offsetX:I,offsetY:d}=i,O=I===0||I,L=d===0||d;return{x:O?I:N(),y:L?d:y()}}class mn{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function pn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){pn(t,i,r[i])})}return t}class xn{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",a),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",a),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return pt({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return pt({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ft).some(r=>ft[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=cn(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&Lt(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=se(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=i,f=ke(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const u=this.monitor.getSourceId(),b=this.sourceNodes.get(u),w=this.sourcePreviewNodes.get(u)||b;if(w){const{anchorX:x,anchorY:v,offsetX:y,offsetY:N}=this.getCurrentSourcePreviewNodeOptions(),O=fn(b,w,o,{anchorX:x,anchorY:v},{offsetX:y,offsetY:N});l.setDragImage(w,O.x,O.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(f)this.beginDragNativeItem(f);else{if(l&&!l.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:l}=i,f=ke(l);f&&this.beginDragNativeItem(f,l)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:se(i)}),a.some(l=>this.monitor.canDropOnTarget(l))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=se(i),this.scheduleHover(a),(a||[]).some(l=>this.monitor.canDropOnTarget(l))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else ke(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:se(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new mn(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new on(this.isNodeInDocument)}}const vn=function(e,r,n){return new xn(e,r,n)},xt={MENU_ITEM:"menu_item"},yn=({item:t,index:e,template:r,moveItem:n,onItemEdit:i})=>{const a=m.useRef(null),[o,l]=m.useState(!1),[f,p]=m.useState(null),[u,b]=m.useState(""),[{isDragging:w},x]=Xs({type:xt.MENU_ITEM,item:{id:t.id,index:e},collect:d=>({isDragging:d.isDragging()})}),[,v]=sn({accept:xt.MENU_ITEM,hover:(d,O)=>{if(!a.current)return;const L=d.index,k=e;if(L===k)return;const F=a.current.getBoundingClientRect(),$=(F.bottom-F.top)/2,W=O.getClientOffset().y-F.top;L<k&&W<$||L>k&&W>$||(n(L,k),d.index=k)}});x(v(a));const y=d=>{p(d),b(d==="name"?t.name:t.description||""),l(!0)},N=()=>{f&&u.trim()&&i(t.id,f,u.trim()),l(!1),p(null),b("")},I=d=>{d.key==="Enter"?(d.preventDefault(),N()):d.key==="Escape"&&(l(!1),p(null),b(""))};return s.jsxs("div",{ref:a,className:`flex justify-between items-start gap-4 transition-opacity ${w?"opacity-50":"opacity-100"}`,style:{cursor:"move"},children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[o&&f==="name"?s.jsx("input",{type:"text",value:u,onChange:d=>b(d.target.value),onBlur:N,onKeyDown:I,className:"text-xl font-semibold bg-transparent border-b-2 border-blue-500 outline-none",style:{color:r.textColor,fontFamily:r.fontFamily||"inherit"},autoFocus:!0}):s.jsx("h3",{className:"text-xl font-semibold cursor-text hover:bg-gray-100 px-1 rounded",style:{color:r.textColor,fontFamily:r.fontFamily||"inherit"},onDoubleClick:()=>y("name"),title:"Double-click to edit",children:t.name}),s.jsx("div",{className:"flex-1 border-b-2 border-dotted",style:{borderColor:r.textColor,opacity:.2}})]}),o&&f==="description"?s.jsx("textarea",{value:u,onChange:d=>b(d.target.value),onBlur:N,onKeyDown:I,className:"text-sm md:text-base bg-transparent border-b-2 border-blue-500 outline-none w-full resize-none",style:{color:r.textColor,opacity:.7,fontFamily:r.fontFamily||"inherit"},rows:2,autoFocus:!0}):t.description?s.jsx("p",{className:"text-sm md:text-base cursor-text hover:bg-gray-100 px-1 rounded",style:{color:r.textColor,opacity:.7,fontFamily:r.fontFamily||"inherit"},onDoubleClick:()=>y("description"),title:"Double-click to edit",children:t.description}):s.jsx("p",{className:"text-sm md:text-base cursor-text hover:bg-gray-100 px-1 rounded opacity-50",style:{color:r.textColor,fontFamily:r.fontFamily||"inherit"},onDoubleClick:()=>y("description"),title:"Double-click to add description",children:"Click to add description..."})]}),s.jsxs("div",{className:"text-xl font-bold flex-shrink-0",style:{color:r.primaryColor,fontFamily:r.fontFamily||"inherit"},children:["$",t.price]})]})};function bn({template:t,menuData:e,backgroundSettings:r,onMenuDataChange:n}){const[i,a]=m.useState(!1),[o,l]=m.useState(null),[f,p]=m.useState(""),u=e.items.reduce((d,O)=>(d[O.category]||(d[O.category]=[]),d[O.category].push(O),d),{}),b=Object.keys(u).sort(),w=d=>d.charAt(0).toUpperCase()+d.slice(1)+"s",x=m.useCallback((d,O,L)=>{const k=[...u[L]],F=k[d];k.splice(d,1),k.splice(O,0,F);const $={...e,items:e.items.map(z=>z.category===L&&k.find(Ge=>Ge.id===z.id)||z)};n==null||n($)},[e,u,n]),v=d=>{l(d),p(d==="name"?e.businessName:e.businessDescription||""),a(!0)},y=()=>{if(o&&f.trim()){const d={...e,[o==="name"?"businessName":"businessDescription"]:f.trim()};n==null||n(d)}a(!1),l(null),p("")},N=d=>{d.key==="Enter"?(d.preventDefault(),y()):d.key==="Escape"&&(a(!1),l(null),p(""))},I=(d,O,L)=>{const k={...e,items:e.items.map(F=>F.id===d?{...F,[O]:L}:F)};n==null||n(k)};return s.jsx(Cs,{backend:vn,children:s.jsxs(ie,{className:"shadow-2xl overflow-hidden relative",style:{backgroundColor:t.backgroundColor,backgroundImage:t.backgroundGradient||((r==null?void 0:r.type)==="custom"&&r.imageUrl?`url(${r.imageUrl})`:void 0),backgroundSize:(r==null?void 0:r.type)==="custom"?r.size:"cover",backgroundPosition:(r==null?void 0:r.type)==="custom"?r.position.replace("-"," "):"center",backgroundRepeat:(r==null?void 0:r.type)==="custom"&&r.size==="repeat"?"repeat":"no-repeat",fontFamily:t.fontFamily||"inherit"},children:[(r==null?void 0:r.type)==="custom"&&r.imageUrl&&s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${r.imageUrl})`,backgroundSize:r.size,backgroundPosition:r.position.replace("-"," "),backgroundRepeat:r.size==="repeat"?"repeat":"no-repeat",opacity:r.opacity/100,filter:`brightness(${r.brightness}%) blur(${r.blur}px)`}}),s.jsxs("div",{className:"p-8 md:p-12 relative z-10",style:{fontFamily:t.fontFamily||"inherit"},children:[s.jsxs("div",{className:"text-center mb-12",children:[i&&o==="name"?s.jsx("input",{type:"text",value:f,onChange:d=>p(d.target.value),onBlur:y,onKeyDown:N,className:"text-4xl md:text-5xl font-bold bg-transparent border-b-2 border-blue-500 outline-none text-center mb-4",style:{color:t.primaryColor,fontFamily:t.fontFamily||"inherit"},autoFocus:!0}):s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 cursor-text hover:bg-gray-100 px-2 rounded inline-block",style:{color:t.primaryColor,fontFamily:t.fontFamily||"inherit"},onDoubleClick:()=>v("name"),title:"Double-click to edit",children:e.businessName||"Your Business Name"}),i&&o==="description"?s.jsx("textarea",{value:f,onChange:d=>p(d.target.value),onBlur:y,onKeyDown:N,className:"text-lg md:text-xl max-w-2xl mx-auto bg-transparent border-b-2 border-blue-500 outline-none text-center resize-none",style:{color:t.textColor,opacity:.8,fontFamily:t.fontFamily||"inherit"},rows:2,autoFocus:!0}):e.businessDescription||i?s.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto cursor-text hover:bg-gray-100 px-2 rounded inline-block",style:{color:t.textColor,opacity:.8,fontFamily:t.fontFamily||"inherit"},onDoubleClick:()=>v("description"),title:"Double-click to edit",children:e.businessDescription||"Your business description"}):s.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto cursor-text hover:bg-gray-100 px-2 rounded inline-block opacity-50",style:{color:t.textColor,fontFamily:t.fontFamily||"inherit"},onDoubleClick:()=>v("description"),title:"Double-click to add description",children:"Click to add business description..."}),s.jsx("div",{className:"w-24 h-1 mx-auto mt-6 rounded",style:{backgroundColor:t.accentColor}})]}),e.items.length===0?s.jsx("div",{className:"text-center py-16",children:s.jsx("p",{className:"text-slate-500 text-lg",children:"Your menu items will appear here"})}):s.jsx("div",{className:"space-y-12",children:b.map(d=>s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-semibold mb-6 pb-2 border-b-2",style:{color:t.primaryColor,borderColor:t.accentColor,fontFamily:t.fontFamily||"inherit"},children:w(d)}),s.jsx("div",{className:"space-y-6",children:u[d].map((O,L)=>s.jsx(yn,{item:O,index:L,template:t,moveItem:(k,F)=>x(k,F,d),onItemEdit:I},O.id))})]},d))}),e.items.length>0&&s.jsx("div",{className:"mt-12 pt-8 border-t-2",style:{borderColor:t.accentColor},children:s.jsx("p",{className:"text-center text-sm",style:{color:t.textColor,opacity:.6,fontFamily:t.fontFamily||"inherit"},children:"Thank you for dining with us"})})]})]})})}function Dn({template:t,menuData:e}){var o,l,f,p;const r=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-800 to-red-900 text-white p-8 text-center",children:[s.jsx("h1",{className:"text-4xl font-serif mb-2",style:{fontFamily:"Playfair Display, serif"},children:e.businessName||"Bella Vista Trattoria"}),s.jsx("p",{className:"text-lg italic opacity-90",children:e.businessDescription||"Authentic Italian Cuisine Since 1985"}),s.jsxs("div",{className:"mt-4 flex justify-center space-x-8 text-sm",children:[s.jsx("span",{children:" (555) 123-4567"}),s.jsx("span",{children:" 123 Main Street"}),s.jsx("span",{children:" Open Daily 11AM-10PM"})]})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-serif text-red-800 mb-2",children:"Antipasti"}),s.jsx("div",{className:"w-24 h-1 bg-red-800 mx-auto"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[s.jsx("h3",{className:"font-serif text-xl text-gray-800 mb-2",children:"Bruschetta Classica"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Toasted bread with fresh tomatoes, basil, garlic, and extra virgin olive oil"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-red-600 font-semibold",children:"14.00"}),s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Vegetarian"})]})]}),s.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[s.jsx("h3",{className:"font-serif text-xl text-gray-800 mb-2",children:"Carpaccio di Manzo"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Thinly sliced raw beef with arugula, parmesan, and lemon dressing"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-red-600 font-semibold",children:"18.00"}),s.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"Chef's Special"})]})]})]})]}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-serif text-red-800 mb-2",children:"Primi Piatti"}),s.jsx("div",{className:"w-24 h-1 bg-red-800 mx-auto"})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[s.jsx("h3",{className:"font-serif text-xl text-gray-800 mb-2",children:"Tagliatelle al Rag"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Fresh egg pasta with traditional bolognese sauce, slow-cooked for 6 hours"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-red-600 font-semibold",children:"24.00"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded",children:" Spicy"}),s.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:" Wine Pairing Available"})]})]})]})})]}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-serif text-red-800 mb-2",children:"Dolci"}),s.jsx("div",{className:"w-24 h-1 bg-red-800 mx-auto"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-serif text-xl text-gray-800 mb-2",children:"Tiramis"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Classic Italian dessert with coffee-soaked ladyfingers and mascarpone"}),s.jsx("span",{className:"text-red-600 font-semibold",children:"8.00"})]})})]})]})]})}),n=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto bg-white rounded-xl shadow-xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 text-white p-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-1",style:{fontFamily:"Inter, sans-serif"},children:e.businessName||"Artisan Coffee House"}),s.jsx("p",{className:"opacity-90",children:e.businessDescription||"Specialty Coffee & Artisanal Bites"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold",children:""}),s.jsx("div",{className:"text-sm",children:"Est. 2019"})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mr-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Coffee & Espresso"}),s.jsx("p",{className:"text-gray-600",children:"Handcrafted beverages"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Cappuccino",desc:"Espresso with steamed milk foam",price:"4.50",popular:!0},{name:"Latte",desc:"Smooth espresso with steamed milk",price:"5.00"},{name:"Cold Brew",desc:"24-hour steeped, served over ice",price:"4.00"},{name:"Americano",desc:"Espresso with hot water",price:"3.50"},{name:"Macchiato",desc:"Espresso marked with foam",price:"4.25"},{name:"Mocha",desc:"Espresso with chocolate and steamed milk",price:"5.50"}].map((u,b)=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.popular&&s.jsx("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full inline-block mb-2",children:" Popular"}),s.jsx("h3",{className:"font-semibold text-lg text-gray-800 mb-1",children:u.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:u.desc}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-amber-600 font-bold text-lg",children:["$",u.price]}),s.jsx("div",{className:"flex space-x-1",children:s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:""})})]})]},b))})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mr-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Pastries & Baked Goods"}),s.jsx("p",{className:"text-gray-600",children:"Fresh daily"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Croissant",desc:"Buttery, flaky French pastry",price:"3.50",popular:!0},{name:"Blueberry Muffin",desc:"Fresh baked with real blueberries",price:"4.00"},{name:"Chocolate Chip Cookie",desc:"Warm, gooey, homemade",price:"2.50"},{name:"Cinnamon Roll",desc:"Swirled with cream cheese frosting",price:"4.50"}].map((u,b)=>s.jsxs("div",{className:"text-center bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.popular&&s.jsx("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full inline-block mb-2",children:" Popular"}),s.jsx("div",{className:"text-3xl mb-2",children:""}),s.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:u.name}),s.jsx("p",{className:"text-gray-600 text-xs mb-2",children:u.desc}),s.jsxs("span",{className:"text-amber-600 font-bold",children:["$",u.price]})]},b))})]})]})]})}),i=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto bg-gradient-to-b from-white to-gray-50 rounded-lg shadow-2xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white p-8 text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M20 20 L40 20 L20 40 L0 20 Z'/%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("h1",{className:"text-4xl font-light tracking-wider mb-2",style:{fontFamily:"Cormorant Garamond, serif"},children:e.businessName||"Le Gourmet"}),s.jsx("p",{className:"text-lg italic opacity-80 tracking-wide",children:e.businessDescription||"Contemporary Fine Dining & Culinary Artistry"}),s.jsxs("div",{className:"mt-6 flex justify-center space-x-12 text-sm tracking-wide",children:[s.jsx("span",{children:" Reservations Recommended"}),s.jsx("span",{children:" Jacket Required"}),s.jsx("span",{children:" Tasting Menu Available"})]})]})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-light tracking-wide text-slate-800 mb-3",children:"Tasting Menu"}),s.jsx("p",{className:"text-gray-600 italic mb-4",children:"Seven-course journey with wine pairing"}),s.jsxs("div",{className:"inline-block",children:[s.jsx("span",{className:"text-3xl font-light text-slate-800",children:"$185"}),s.jsx("span",{className:"text-gray-600 ml-2",children:"per person"})]})]}),s.jsx("div",{className:"space-y-8",children:[{course:"First",name:"Amuse-Bouche",desc:"Oyster with champagne mignonette",wine:"Dom Prignon 2012"},{course:"Second",name:"Foie Gras Torchon",desc:"Seared foie gras with brioche and fig jam",wine:"Sauternes 2018"},{course:"Third",name:"Lobster Consomm",desc:"Clarified broth with lobster dumplings",wine:"Chablis Grand Cru 2019"},{course:"Fourth",name:"Wagyu Beef Tenderloin",desc:"A5 Japanese wagyu with truffle sauce",wine:"Bordeaux 2015"},{course:"Fifth",name:"Dover Sole Meunire",desc:"Pan-fried with lemon butter",wine:"Muscadet 2020"},{course:"Sixth",name:"Cheese Course",desc:"Artisanal selection with accompaniments",wine:"Port 2017"},{course:"Seventh",name:"Dessert Degustation",desc:"Chocolate sphere with salted caramel",wine:"Sauternes 2018"}].map((u,b)=>s.jsx("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-sm font-light text-gray-500 mr-3",children:u.course}),s.jsx("h3",{className:"text-xl font-light text-slate-800",children:u.name})]}),s.jsx("p",{className:"text-gray-600 mb-2 leading-relaxed",children:u.desc}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx("span",{className:"text-gray-500 mr-2",children:"Wine Pairing:"}),s.jsx("span",{className:"text-slate-700 italic",children:u.wine})]})]}),s.jsxs("div",{className:"ml-8 text-right",children:[s.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mb-2"}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Course ",b+1]})]})]})},b))})]})]})}),a=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 p-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto bg-white rounded-xl shadow-2xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white p-6 relative",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",children:s.jsx("div",{className:"h-full w-full bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.2'%3E%3Cpath d='M30 10 L35 20 L40 10 L45 20 L50 10 L55 20 L60 10 L60 60 L50 60 L45 50 L40 60 L35 50 L30 60 L20 60 L15 50 L10 60 L0 60 L0 10 L5 20 L10 10 L15 20 L20 10 Z'/%3E%3C/g%3E%3C/svg%3E")`}})}),s.jsxs("div",{className:"relative z-10 text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-2",style:{fontFamily:"Bebas Neue, sans-serif"},children:e.businessName||"Taquera El Sol"}),s.jsx("p",{className:"text-xl opacity-90",children:e.businessDescription||"Autntica Comida Mexicana"}),s.jsxs("div",{className:"mt-3 flex justify-center space-x-6 text-sm",children:[s.jsx("span",{children:" Tacos   Burritos   Bowls"}),s.jsx("span",{children:" Salsa Bar   Cerveza Fra"})]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-red-600 mb-2",children:" Tacos"}),s.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-red-600 to-orange-500 mx-auto rounded-full"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Carne Asada",desc:"Grilled steak, onions, cilantro, salsa verde",price:"3.50",spicy:!0,popular:!0},{name:"Al Pastor",desc:"Marinated pork, pineapple, onions, cilantro",price:"3.00",spicy:!1},{name:"Carnitas",desc:"Slow-cooked pork, pico de gallo, guacamole",price:"3.25",spicy:!1},{name:"Pollo Asado",desc:"Grilled chicken, peppers, onions, sour cream",price:"2.75",spicy:!1},{name:"Barbacoa",desc:"Slow-cooked beef, cilantro, onions, consomm",price:"3.75",spicy:!0},{name:"Pescado",desc:"Grilled fish, cabbage slaw, chipotle mayo",price:"4.00",spicy:!0}].map((u,b)=>s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 rounded-lg p-4 border-2 border-red-200 hover:shadow-lg transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:u.name}),s.jsxs("div",{className:"flex space-x-1",children:[u.spicy&&s.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded",children:""}),u.popular&&s.jsx("span",{className:"bg-yellow-500 text-white text-xs px-2 py-1 rounded",children:""})]})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:u.desc}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-2xl font-bold text-red-600",children:["$",u.price]}),s.jsx("span",{className:"text-xs text-gray-500",children:"each"})]})]},b))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-4",children:" Sides & Extras"}),s.jsx("div",{className:"space-y-3",children:[{name:"Mexican Rice",price:"2.00"},{name:"Refried Beans",price:"2.00"},{name:"Guacamole",price:"3.00"},{name:"Chips & Salsa",price:"2.50"},{name:"Elote (Mexican Corn)",price:"3.50"}].map((u,b)=>s.jsxs("div",{className:"flex justify-between items-center bg-yellow-50 rounded p-3",children:[s.jsx("span",{className:"font-medium",children:u.name}),s.jsxs("span",{className:"font-bold text-orange-600",children:["$",u.price]})]},b))})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-yellow-600 mb-4",children:" Beverages"}),s.jsx("div",{className:"space-y-3",children:[{name:"Jarritos (Various)",price:"2.50"},{name:"Mexican Coke",price:"2.00"},{name:"Horchata",price:"3.00"},{name:"Jamaica",price:"3.00"},{name:"Tamarindo",price:"3.00"},{name:"Corona Extra",price:"4.00"},{name:"Modelo Especial",price:"4.50"}].map((u,b)=>s.jsxs("div",{className:"flex justify-between items-center bg-red-50 rounded p-3",children:[s.jsx("span",{className:"font-medium",children:u.name}),s.jsxs("span",{className:"font-bold text-red-600",children:["$",u.price]})]},b))})]})]})]})]})});return t.id==="elegant-restaurant"||(o=t.id)!=null&&o.includes("elegant")?r():t.id==="modern-cafe"||(l=t.id)!=null&&l.includes("cafe")?n():t.id==="gourmet-kitchen"||(f=t.id)!=null&&f.includes("gourmet")?i():t.id==="pizzeria-classic"||(p=t.id)!=null&&p.includes("pizzeria")?a():n()}function On(){const[t]=Qt(),e=Zt(),{token:r,user:n,loading:i,getValidToken:a}=er(),[o,l]=m.useState(!0),[f,p]=m.useState(!1),[u,b]=m.useState("template"),[w,x]=m.useState(null),[v,y]=m.useState({templateId:"",businessName:"",businessDescription:"",primaryColor:"",items:[]}),[N,I]=m.useState(!1),[d,O]=m.useState(null),[L,k]=m.useState(!1),[F,$]=m.useState(!0),[z,W]=m.useState(!1),[Ge,At]=m.useState(null),[_t,J]=m.useState(!1),[M,K]=m.useState({type:"template",opacity:100,size:"cover",position:"center",blur:0,brightness:100}),[Q,Ve]=m.useState([]),[Bt,ue]=m.useState(!1),[he,Ye]=m.useState(""),[ge,fe]=m.useState(""),[We,me]=m.useState(""),[pe,xe]=m.useState(""),[Xe,ve]=m.useState("appetizer"),[Je,ye]=m.useState("");m.useEffect(()=>{i||zt()},[t,i]),m.useEffect(()=>{const c=t.get("template");if(c&&!o&&!i){let h=et(c),g=tt(c);if(h){const C={id:h.id,name:h.name,description:h.description,primaryColor:h.menuData.restaurant.primaryColor,backgroundColor:h.menuData.restaurant.secondaryColor,textColor:"#FFFFFF",accentColor:h.menuData.restaurant.primaryColor,style:"modern",fontFamily:h.menuData.restaurant.fontFamily,layout:"single-column",headerStyle:"modern",categoryStyle:"underline",itemStyle:"simple",decorativeElements:{borders:!1,dividers:!0,icons:!1,patterns:!1},backgroundPattern:"none"};x(C);const j=[];h.menuData.categories.forEach(T=>{T.items.forEach(E=>{j.push({id:E.id,name:E.name,description:E.description,price:E.price,category:T.id,customCategory:T.name})})}),y({templateId:h.id,businessName:h.menuData.restaurant.name,businessDescription:h.menuData.restaurant.description,primaryColor:h.menuData.restaurant.primaryColor,items:j}),b("editor")}else if(g){const C={id:g.id,name:g.name,description:g.description,primaryColor:g.menuData.restaurant.primaryColor,backgroundColor:g.menuData.restaurant.secondaryColor,textColor:"#FFFFFF",accentColor:g.menuData.restaurant.primaryColor,style:"modern",fontFamily:g.menuData.restaurant.fontFamily,layout:"single-column",headerStyle:"modern",categoryStyle:"underline",itemStyle:"simple",decorativeElements:{borders:!1,dividers:!0,icons:!1,patterns:!1},backgroundPattern:"none"};x(C);const j=[];g.menuData.categories.forEach(T=>{T.items.forEach(E=>{j.push({id:E.id,name:E.name,description:E.description,price:E.price,category:T.id,customCategory:T.name})})}),y({templateId:g.id,businessName:g.menuData.restaurant.name,businessDescription:g.menuData.restaurant.description,primaryColor:g.menuData.restaurant.primaryColor,items:j}),b("editor")}}},[t,o,i]),m.useEffect(()=>{t.get("view")==="preview"&&k(!0)},[t]);const Ht=c=>{var C;const h=et(c.id),g=tt(c.id);if(h){const j={id:h.id,name:h.name,description:h.description,primaryColor:h.menuData.restaurant.primaryColor,backgroundColor:h.menuData.restaurant.secondaryColor,textColor:"#FFFFFF",accentColor:h.menuData.restaurant.primaryColor,style:"modern",fontFamily:h.menuData.restaurant.fontFamily,layout:"single-column",headerStyle:"modern",categoryStyle:"underline",itemStyle:"simple",decorativeElements:{borders:!1,dividers:!0,icons:!1,patterns:!1},backgroundPattern:"none"};x(j);const T=[];h.menuData.categories.forEach(E=>{E.items.forEach(H=>{T.push({id:H.id,name:H.name,description:H.description,price:H.price,category:E.id,customCategory:E.name})})}),y({templateId:h.id,businessName:h.menuData.restaurant.name,businessDescription:h.menuData.restaurant.description,primaryColor:h.menuData.restaurant.primaryColor,items:T})}else if(g){const j={id:g.id,name:g.name,description:g.description,primaryColor:g.menuData.restaurant.primaryColor,backgroundColor:g.menuData.restaurant.secondaryColor,textColor:"#FFFFFF",accentColor:g.menuData.restaurant.primaryColor,style:"modern",fontFamily:g.menuData.restaurant.fontFamily,layout:"single-column",headerStyle:"modern",categoryStyle:"underline",itemStyle:"simple",decorativeElements:{borders:!1,dividers:!0,icons:!1,patterns:!1},backgroundPattern:"none"};x(j);const T=[];g.menuData.categories.forEach(E=>{E.items.forEach(H=>{T.push({id:H.id,name:H.name,description:H.description,price:H.price,category:E.id,customCategory:E.name})})}),y({templateId:g.id,businessName:g.menuData.restaurant.name,businessDescription:g.menuData.restaurant.description,primaryColor:g.menuData.restaurant.primaryColor,items:T})}else x(c),y({templateId:c.id,businessName:((C=n==null?void 0:n.user_metadata)==null?void 0:C.businessName)||"",businessDescription:"",primaryColor:c.primaryColor,items:[]});b("editor")},zt=async()=>{console.log("MenuBuilder: Checking authentication...");const c=await a();if(console.log("MenuBuilder: Valid token result:",c?"Success":"Failed"),!c||!n){console.log("MenuBuilder: Redirecting to login due to auth failure"),S.error("Please log in to continue"),e("/login");return}try{const h=t.get("menuId");if(h){const g=await fetch(`https://nyqfsuwxrzrfnrslpgfj.supabase.co/functions/v1/make-server-b6941cdd/menu/${h}`,{headers:{Authorization:`Bearer ${c}`}});if(g.ok){const C=await g.json();if(C.menu){const j=be.find(T=>T.id===C.menu.templateId);j&&(x(j),y(C.menu),K(C.menu.backgroundSettings||{type:"template",opacity:100,size:"cover",position:"center",blur:0,brightness:100}),b("editor"))}}}else{console.log("MenuBuilder: Loading latest menu...");try{const g=await fetch("https://nyqfsuwxrzrfnrslpgfj.supabase.co/functions/v1/make-server-b6941cdd/menus",{headers:{Authorization:`Bearer ${c}`}});if(console.log("MenuBuilder: Menus API response status:",g.status),console.log("MenuBuilder: Menus API response ok:",g.ok),g.ok){const C=await g.json();if(console.log("MenuBuilder: Menus data received:",C),C.menus&&C.menus.length>0){const j=C.menus[0];console.log("MenuBuilder: Latest menu found:",j);const T=be.find(E=>E.id===j.templateId);T&&(x(T),y(j),K(j.backgroundSettings||{type:"template",opacity:100,size:"cover",position:"center",blur:0,brightness:100}),b("editor"))}else console.log("MenuBuilder: No menus found for user")}else{const C=await g.text();console.error("MenuBuilder: Menus API error:",{status:g.status,statusText:g.statusText,body:C});let j=`Failed to load menus (${g.status})`;g.status===401?(j="Authentication failed. Please try logging out and logging back in.",window.authDebug&&(console.log(" Running authentication diagnostic..."),window.authDebug.runFullDiagnostic())):g.status===403?j="Access forbidden. You don't have permission to access these menus.":g.status>=500&&(j="Server error. Please try again later."),S.error(j)}}catch(g){console.error("MenuBuilder: Network error while fetching menus:",g),S.error("Network error. Please check your connection and try again.")}}}catch(h){console.error("Error loading menu:",h)}finally{l(!1)}},Ut=c=>{var g;const h=(g=c.target.files)==null?void 0:g[0];if(h){if(h.size>5*1024*1024){S.error("Image size should be less than 5MB");return}const C=new FileReader;C.onload=j=>{var E;const T=(E=j.target)==null?void 0:E.result;K(H=>({...H,type:"custom",imageUrl:T}))},C.readAsDataURL(h)}},q=(c,h)=>{K(g=>({...g,[c]:h}))},$t=()=>{if(!he.trim()){S.error("Please enter a category name");return}const c={id:`category-${Date.now()}`,name:he.trim(),order:Q.length};Ve(h=>[...h,c]),Ye(""),S.success("Category added successfully!")},qt=c=>{Ve(h=>h.filter(g=>g.id!==c)),S.success("Category deleted successfully!")},Ke=c=>{c?(O(c),fe(c.name),me(c.description),xe(c.price),ve(c.category),ye(c.customCategory||"")):(O(null),fe(""),me(""),xe(""),ve("appetizer"),ye("")),I(!0)},Gt=()=>{if(!ge||!pe){S.error("Please fill in all required fields");return}const c={id:(d==null?void 0:d.id)||`item-${Date.now()}`,name:ge,description:We,price:pe,category:Xe,customCategory:Je||void 0};d?(y({...v,items:v.items.map(h=>h.id===d.id?c:h)}),S.success("Item updated")):(y({...v,items:[...v.items,c]}),S.success("Item added")),I(!1)},Vt=c=>{y({...v,items:v.items.filter(h=>h.id!==c)}),S.success("Item deleted")},Yt=()=>{const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let h="";for(let g=0;g<8;g++)h+=c.charAt(Math.floor(Math.random()*c.length));return h},Wt=async()=>{if(!w){S.error("Please select a template first");return}if(!v.templateId){S.error("Template not selected. Please go back and choose a template.");return}if(!v.businessName||v.businessName.trim()===""){S.error("Please enter your business name");return}if(v.items.length===0){S.error("Please add at least one menu item");return}const c=await a();if(!c){S.error("Please log in again"),e("/login");return}try{const h=Yt();At(h);const g={...v,templateId:w.id,primaryColor:w.primaryColor,shareableId:h,backgroundSettings:M.type==="custom"?M:void 0},C=await fetch("https://nyqfsuwxrzrfnrslpgfj.supabase.co/functions/v1/make-server-b6941cdd/menu",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(g)});if(!C.ok){const T=await C.json();throw new Error(T.error||`Failed to save menu: ${C.status}`)}const j=`${window.location.origin}/menu/${h}`;await navigator.clipboard.writeText(j),S.success(`Shareable link copied to clipboard! ${j}`)}catch(h){console.error("Error generating link:",h);const g=h instanceof Error?h.message:"Failed to generate shareable link";S.error(g)}},Xt=async()=>{var c;if(!w){S.error("Please select a template first");return}if(!v.templateId){S.error("Template not selected. Please go back and choose a template.");return}if(!v.businessName||v.businessName.trim()===""){S.error("Please enter your business name");return}if(v.items.length===0){S.error("Please add at least one menu item");return}p(!0);try{const h=await a();if(!h){S.error("Please log in again"),p(!1),e("/login");return}const g={...v,templateId:w.id,primaryColor:w.primaryColor,backgroundSettings:M.type==="custom"?M:void 0};console.log("Saving menu:",g);const C=await fetch("https://nyqfsuwxrzrfnrslpgfj.supabase.co/functions/v1/make-server-b6941cdd/menu",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(g)}),j=await C.json();if(!C.ok)throw console.error("Save failed:",j),new Error(j.error||`Failed to save menu: ${C.status}`);const T=j.menuId||((c=j.menu)==null?void 0:c.menuId);T?(S.success("Menu saved successfully!"),setTimeout(()=>{e(`/menu/${T}`)},500)):(S.success("Menu saved successfully!"),setTimeout(()=>{e("/dashboard")},500))}catch(h){console.error("Error saving menu:",h);const g=h instanceof Error?h.message:"Failed to save menu";S.error(g)}finally{p(!1)}};return o||i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):L&&w?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100",children:[s.jsx("header",{className:"border-b bg-white/80 backdrop-blur-sm",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[s.jsxs(tr,{to:"/dashboard",className:"flex items-center gap-2",children:[s.jsx("img",{src:"/logo.svg",alt:"MenuCraft",className:"w-8 h-8"}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"MenuCraft"})]}),s.jsxs(R,{onClick:()=>k(!1),variant:"outline",children:[s.jsx(rr,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(Qe,{template:w,menuData:v,backgroundSettings:M})})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u==="template"&&s.jsx(or,{templates:be,onSelectTemplate:Ht}),u==="editor"&&w&&s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Build Your Menu"}),s.jsxs("p",{className:"text-slate-600",children:["Template: ",w.name]})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsx(ie,{children:s.jsxs(Me,{className:"pt-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx(A,{htmlFor:"businessName",children:"Business Name"}),s.jsx(U,{id:"businessName",value:v.businessName,onChange:c=>y({...v,businessName:c.target.value}),placeholder:"My Restaurant"})]}),s.jsxs("div",{children:[s.jsx(A,{htmlFor:"businessDescription",children:"Description"}),s.jsx(rt,{id:"businessDescription",value:v.businessDescription,onChange:c=>y({...v,businessDescription:c.target.value}),placeholder:"A brief description of your business",rows:3})]}),s.jsx(R,{onClick:()=>b("template"),variant:"outline",className:"w-full",children:"Change Template"}),s.jsx(R,{onClick:()=>J(!0),variant:"outline",className:"w-full",children:"Background Settings"}),s.jsx(R,{onClick:()=>ue(!0),variant:"outline",className:"w-full",children:"Manage Categories"})]})}),s.jsx(ie,{children:s.jsxs(Me,{className:"pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-semibold",children:["Menu Items (",v.items.length,")"]}),s.jsxs(R,{onClick:()=>Ke(),size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[s.jsx(Ze,{className:"w-4 h-4 mr-1"}),"Add"]})]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:v.items.length===0?s.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:'No items yet. Click "Add" to create your first item.'}):v.items.map(c=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:c.name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:c.category})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["$",c.price]}),s.jsxs(R,{onClick:()=>Ke(c),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Edit"}),""]}),s.jsx(R,{onClick:()=>Vt(c.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Se,{className:"w-4 h-4"})})]})]},c.id))})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{onClick:Wt,variant:"outline",className:"flex-1",children:[s.jsx(sr,{className:"w-4 h-4 mr-2"}),"Get A Link"]}),s.jsxs(R,{type:"button",onClick:c=>{c.preventDefault(),c.stopPropagation(),Xt()},disabled:f,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),f?"Saving...":"Save Menu"]})]})]}),s.jsxs("div",{className:"lg:col-span-2",children:[z?s.jsx(bn,{template:w,menuData:v,backgroundSettings:M,onMenuDataChange:y}):F?s.jsx(Dn,{template:w,menuData:v}):s.jsx(Qe,{template:w,menuData:v,backgroundSettings:M}),s.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[s.jsx(R,{onClick:()=>{W(!z),$(!1)},variant:"outline",size:"sm",children:z?"Show Simple Preview":"Show Editable Preview"}),!z&&s.jsx(R,{onClick:()=>$(!F),variant:"outline",size:"sm",children:F?"Show Simple Preview":"Show Professional Preview"})]})]})]})]})]}),s.jsx(De,{open:N,onOpenChange:I,children:s.jsxs(we,{children:[s.jsxs(je,{children:[s.jsx(Ce,{children:d?"Edit Menu Item":"Add Menu Item"}),s.jsx(Ne,{children:"Fill in the details for your menu item"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(A,{htmlFor:"itemName",children:"Item Name *"}),s.jsx(U,{id:"itemName",value:ge,onChange:c=>fe(c.target.value),placeholder:"Grilled Salmon"})]}),s.jsxs("div",{children:[s.jsx(A,{htmlFor:"itemDescription",children:"Description"}),s.jsx(rt,{id:"itemDescription",value:We,onChange:c=>me(c.target.value),placeholder:"Fresh Atlantic salmon with seasonal vegetables",rows:3})]}),s.jsxs("div",{children:[s.jsx(A,{htmlFor:"itemPrice",children:"Price *"}),s.jsx(U,{id:"itemPrice",value:pe,onChange:c=>xe(c.target.value),placeholder:"24.99",type:"number",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx(A,{htmlFor:"itemCategory",children:"Category"}),s.jsxs(Z,{value:Xe,onValueChange:ve,children:[s.jsx(ee,{children:s.jsx(te,{})}),s.jsxs(re,{children:[s.jsx(P,{value:"appetizer",children:"Appetizer"}),s.jsx(P,{value:"main",children:"Main Course"}),s.jsx(P,{value:"dessert",children:"Dessert"}),s.jsx(P,{value:"beverage",children:"Beverage"}),s.jsx(P,{value:"side",children:"Side Dish"}),Q.map(c=>s.jsx(P,{value:c.name,children:c.name},c.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{htmlFor:"itemCustomCategory",children:"Custom Category"}),s.jsx(U,{id:"itemCustomCategory",value:Je,onChange:c=>ye(c.target.value),placeholder:"Enter custom category name"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(R,{onClick:()=>I(!1),variant:"outline",className:"flex-1",children:"Cancel"}),s.jsxs(R,{onClick:Gt,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:[d?"Update":"Add"," Item"]})]})]})]})}),s.jsx(De,{open:_t,onOpenChange:J,children:s.jsxs(we,{className:"max-w-2xl",children:[s.jsxs(je,{children:[s.jsx(Ce,{children:"Background Settings"}),s.jsx(Ne,{children:"Customize your menu background with an image and adjust properties"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{htmlFor:"backgroundImage",children:"Background Image"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(U,{id:"backgroundImage",type:"file",accept:"image/*",onChange:Ut,className:"flex-1"}),M.imageUrl&&s.jsx(R,{variant:"outline",onClick:()=>q("imageUrl",void 0),children:s.jsx(Se,{className:"w-4 h-4"})})]}),M.imageUrl&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:M.imageUrl,alt:"Background preview",className:"w-full h-32 object-cover rounded-lg border"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{children:"Background Type"}),s.jsxs(Z,{value:M.type,onValueChange:c=>q("type",c),children:[s.jsx(ee,{children:s.jsx(te,{})}),s.jsxs(re,{children:[s.jsx(P,{value:"template",children:"Use Template Background"}),s.jsx(P,{value:"custom",children:"Use Custom Image"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{children:"Size"}),s.jsxs(Z,{value:M.size,onValueChange:c=>q("size",c),children:[s.jsx(ee,{children:s.jsx(te,{})}),s.jsxs(re,{children:[s.jsx(P,{value:"cover",children:"Cover (fills entire background)"}),s.jsx(P,{value:"contain",children:"Contain (fits image within background)"}),s.jsx(P,{value:"stretch",children:"Stretch (stretches image to fill)"}),s.jsx(P,{value:"repeat",children:"Repeat (tiles the image)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{children:"Position"}),s.jsxs(Z,{value:M.position,onValueChange:c=>q("position",c),children:[s.jsx(ee,{children:s.jsx(te,{})}),s.jsxs(re,{children:[s.jsx(P,{value:"center",children:"Center"}),s.jsx(P,{value:"top",children:"Top"}),s.jsx(P,{value:"bottom",children:"Bottom"}),s.jsx(P,{value:"left",children:"Left"}),s.jsx(P,{value:"right",children:"Right"}),s.jsx(P,{value:"top-left",children:"Top Left"}),s.jsx(P,{value:"top-right",children:"Top Right"}),s.jsx(P,{value:"bottom-left",children:"Bottom Left"}),s.jsx(P,{value:"bottom-right",children:"Bottom Right"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(A,{htmlFor:"opacity",children:["Opacity: ",M.opacity,"%"]}),s.jsx(U,{id:"opacity",type:"range",min:"0",max:"100",value:M.opacity,onChange:c=>q("opacity",parseInt(c.target.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(A,{htmlFor:"brightness",children:["Brightness: ",M.brightness,"%"]}),s.jsx(U,{id:"brightness",type:"range",min:"50",max:"150",value:M.brightness,onChange:c=>q("brightness",parseInt(c.target.value))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(A,{htmlFor:"blur",children:["Blur: ",M.blur,"px"]}),s.jsx(U,{id:"blur",type:"range",min:"0",max:"10",value:M.blur,onChange:c=>q("blur",parseInt(c.target.value))})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(R,{onClick:()=>J(!1),variant:"outline",className:"flex-1",children:"Cancel"}),s.jsx(R,{onClick:()=>J(!1),className:"flex-1 bg-orange-600 hover:bg-orange-700",children:"Apply Settings"})]})]})]})}),s.jsx(De,{open:Bt,onOpenChange:ue,children:s.jsxs(we,{className:"max-w-md",children:[s.jsxs(je,{children:[s.jsx(Ce,{children:"Manage Categories"}),s.jsx(Ne,{children:"Create and manage custom categories for your menu items"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{htmlFor:"newCategoryName",children:"New Category Name"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"newCategoryName",value:he,onChange:c=>Ye(c.target.value),placeholder:"e.g., Desserts",className:"flex-1"}),s.jsx(R,{onClick:$t,className:"bg-orange-600 hover:bg-orange-700",children:s.jsx(Ze,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(A,{children:"Existing Categories"}),Q.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No custom categories yet. Add one above!"}):s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Q.map(c=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:c.name}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>qt(c.id),children:s.jsx(Se,{className:"w-4 h-4"})})]},c.id))})]}),s.jsx("div",{className:"flex gap-2 pt-4",children:s.jsx(R,{onClick:()=>ue(!1),variant:"outline",className:"flex-1",children:"Cancel"})})]})]})})]})}export{On as default};
