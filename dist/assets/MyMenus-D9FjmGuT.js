import{c as w,j as e,r as l,e as M,S as J,b as K,d as Q,i as u,v as _,l as X,k as Z,o as ee,w as te,t as v,m as A,n as b,B as D,p as ae,q as se,s as re}from"./index-BomiKcKO.js";import{B as oe}from"./badge-CmVG18XS.js";import{S as ne,E as le,C as ie}from"./CreateMenuDialog-BkRpBKjU.js";import{R as ce,W as de,C as ue,T as me,D as ge,a as S,c as k,b as pe,O as xe,d as fe,P as he}from"./dialog-XEH1oEkS.js";import{P as C}from"./package-B7qtmpzv.js";import"./index-BqL4bi_L.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],je=w("calendar",ve);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ne=w("loader-circle",De);var E="AlertDialog",[ye]=Q(E,[k]),c=k(),P=t=>{const{__scopeAlertDialog:a,...s}=t,r=c(a);return e.jsx(ce,{...r,...s,modal:!0})};P.displayName=E;var Ae="AlertDialogTrigger",be=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,n=c(s);return e.jsx(fe,{...n,...r,ref:a})});be.displayName=Ae;var Ce="AlertDialogPortal",T=t=>{const{__scopeAlertDialog:a,...s}=t,r=c(a);return e.jsx(pe,{...r,...s})};T.displayName=Ce;var we="AlertDialogOverlay",O=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,n=c(s);return e.jsx(xe,{...n,...r,ref:a})});O.displayName=we;var p="AlertDialogContent",[Me,_e]=ye(p),R=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,children:r,...n}=t,x=c(s),g=l.useRef(null),j=M(a,g),f=l.useRef(null);return e.jsx(de,{contentName:p,titleName:I,docsSlug:"alert-dialog",children:e.jsx(Me,{scope:s,cancelRef:f,children:e.jsxs(ue,{role:"alertdialog",...x,...n,ref:j,onOpenAutoFocus:K(n.onOpenAutoFocus,m=>{var h;m.preventDefault(),(h=f.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(J,{children:r}),e.jsx(ke,{contentRef:g})]})})})});R.displayName=p;var I="AlertDialogTitle",$=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,n=c(s);return e.jsx(me,{...n,...r,ref:a})});$.displayName=I;var L="AlertDialogDescription",F=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,n=c(s);return e.jsx(ge,{...n,...r,ref:a})});F.displayName=L;var Se="AlertDialogAction",z=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,n=c(s);return e.jsx(S,{...n,...r,ref:a})});z.displayName=Se;var B="AlertDialogCancel",q=l.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,{cancelRef:n}=_e(B,s),x=c(s),g=M(a,n);return e.jsx(S,{...x,...r,ref:g})});q.displayName=B;var ke=({contentRef:t})=>{const a=`\`${p}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${p}\` by passing a \`${L}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${p}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},Ee=P,Pe=T,Te=O,Oe=R,Re=z,Ie=q,$e=$,Le=F;function Fe({...t}){return e.jsx(Ee,{"data-slot":"alert-dialog",...t})}function ze({...t}){return e.jsx(Pe,{"data-slot":"alert-dialog-portal",...t})}function Be({className:t,...a}){return e.jsx(Te,{"data-slot":"alert-dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function qe({className:t,...a}){return e.jsxs(ze,{children:[e.jsx(Be,{}),e.jsx(Oe,{"data-slot":"alert-dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function Ge({className:t,...a}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:u("flex flex-col gap-2 text-center sm:text-left",t),...a})}function He({className:t,...a}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:u("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function Ue({className:t,...a}){return e.jsx($e,{"data-slot":"alert-dialog-title",className:u("text-lg font-semibold",t),...a})}function We({className:t,...a}){return e.jsx(Le,{"data-slot":"alert-dialog-description",className:u("text-muted-foreground text-sm",t),...a})}function Ve({className:t,...a}){return e.jsx(Re,{className:u(_(),t),...a})}function Ye({className:t,...a}){return e.jsx(Ie,{className:u(_({variant:"outline"}),t),...a})}function tt(){const{user:t,token:a}=X(),{t:s}=Z(),[r,n]=l.useState([]),[x,g]=l.useState(!0),[j,f]=l.useState(!1),[m,h]=l.useState(!1),[G,N]=l.useState(null),y=ee();l.useEffect(()=>{H()},[]);const H=async()=>{const o=localStorage.getItem("access_token"),d=localStorage.getItem("user");if(!o||!d){y("/login");return}try{const i=await fetch(`https://${te}.supabase.co/functions/v1/make-server-b6941cdd/menus`,{headers:{Authorization:`Bearer ${o}`}});if(i.ok){const Y=await i.json();n(Y.menus||[])}else v.error("Failed to load menus")}catch(i){console.error("Error fetching menus:",i),v.error("Failed to load menus")}finally{g(!1)}},U=async()=>{if(!G)return;if(!localStorage.getItem("access_token")){v.error("Not authenticated");return}try{v.info("Delete functionality coming soon!"),h(!1),N(null)}catch(d){console.error("Error deleting menu:",d),v.error("Failed to delete menu")}},W=o=>{if(!o)return s("myMenus.unknownDate");try{const d=new Date(o),i=s("common.locale")||"en-US";return d.toLocaleDateString(i,{year:"numeric",month:"short",day:"numeric"})}catch{return s("myMenus.unknownDate")}},V=o=>o?`${window.location.origin}/menu/${o}`:"#";return x?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:"w-8 h-8 animate-spin text-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:s("myMenus.loading")})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-foreground mb-2",children:s("myMenus.title")}),e.jsx("p",{className:"text-lg text-muted-foreground",children:s("myMenus.subtitle")})]}),r.length===0?e.jsx(A,{className:"border-2 border-dashed",children:e.jsxs(b,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(C,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s("myMenus.noMenusTitle")}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center max-w-md",children:s("myMenus.noMenusDescription")}),e.jsxs(D,{onClick:()=>f(!0),className:"bg-orange-600 hover:bg-orange-700",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),s("myMenus.createFirstMenu")]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>{var d,i;return e.jsxs(A,{className:"group relative overflow-hidden border-2 hover:border-orange-500 transition-all hover:shadow-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-500/10 rounded-full blur-3xl group-hover:bg-orange-500/20 transition-colors"}),e.jsxs(ae,{className:"relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(se,{className:"text-xl line-clamp-1",children:o.businessName||"Untitled Menu"}),e.jsxs(oe,{variant:"outline",className:"ml-2",children:[((d=o.items)==null?void 0:d.length)||0," items"]})]}),o.businessDescription&&e.jsx(re,{className:"line-clamp-2",children:o.businessDescription})]}),e.jsxs(b,{className:"relative space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{children:[((i=o.items)==null?void 0:i.length)||0," items"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{children:W(o.updatedAt||o.createdAt)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{variant:"outline",className:"flex-1",onClick:()=>y(`/menu-builder?menuId=${o.menuId}`),children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),s("myMenus.edit")]}),o.menuId&&e.jsxs(D,{variant:"outline",className:"flex-1",onClick:()=>window.open(V(o.menuId),"_blank"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),s("myMenus.view")]})]})]})]},o.menuId)})})]}),e.jsx(Fe,{open:m,onOpenChange:h,children:e.jsxs(qe,{children:[e.jsxs(Ge,{children:[e.jsx(Ue,{children:s("myMenus.deleteConfirmTitle")}),e.jsx(We,{children:s("myMenus.deleteConfirmDescription")})]}),e.jsxs(He,{children:[e.jsx(Ye,{onClick:()=>N(null),children:s("common.cancel")}),e.jsx(Ve,{onClick:U,className:"bg-red-600 hover:bg-red-700",children:s("common.delete")})]})]})}),e.jsx(ie,{isOpen:j,onClose:()=>f(!1)})]})}export{tt as default};
